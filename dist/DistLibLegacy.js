var com=com||{};com.fc=com.fc||{};com.fc.JavaScriptDistLib=com.fc.JavaScriptDistLib||{};com.fc.JavaScriptDistLib=Object.assign(com.fc.JavaScriptDistLib,{getProperty:function(objName,property){try{var elem=$('[obj-name= "'+objName+'"]');var value=null;switch(property){case"width":value=elem.width();break;case"height":value=elem.height();break;case"x":value=Math.round(parseFloat(elem.css("transform").split(",")[4]));break;case"y":value=Math.round(parseFloat(elem.css("transform").split(",")[5]));break;case"Alpha":value=elem.css("opacity");break;case"Background color":value=elem.css("background-color");break;case"Horizontal scroll":value=elem.css("overflow-x");break;case"Vertical scroll":value=elem.css("overflow-y");break}return value}catch(e){throw e}},setProperty:function(objName,property,value){try{var elem=$('[obj-name= "'+objName+'"]');switch(property){case"width":elem.css("width",value+"px");break;case"height":elem.css("height",value+"px");break;case"x":var yPos=Math.round(parseFloat(elem.css("transform").split(",")[5]));elem.css("transform","translate("+value+"px,"+yPos+"px)");break;case"y":var xPos=Math.round(parseFloat(elem.css("transform").split(",")[4]));elem.css("transform","translate("+xPos+"px,"+value+"px)");break;case"Alpha":elem.css("opacity",value/100);break;case"Background color":elem.css("background-color",value);break;case"Horizontal scroll":var code=elem.css("overflow-x","hidden");if(value){code=elem.css("overflow-x","scroll")}break;case"Vertical scroll":var code=elem.css("overflow-y","hidden");if(value){code=elem.css("overflow-y","scroll")}break}}catch(e){throw e}},removeGesture:function(objName,gesture){try{var elem=$('[obj-name= "'+objName+'"]');switch(gesture){case"CLICK":return elem.unbind("click");break}}catch(e){throw e}},actionHide:function(block){var object_name=block.getFieldValue("OBJECT");var elemSelector='[obj-name="'+object_name+'"]';var code="  $('"+elemSelector+"').hide();";return code},actionShow:function(block){var object_name=block.getFieldValue("OBJECT");var elemSelector='[obj-name="'+object_name+'"]';var code="  $('"+elemSelector+"').show();";return code},sensorIsVisible:function(block){var object_name=block.getFieldValue("OBJECT");var elemSelector='[obj-name="'+object_name+'"]';var code="  $('"+elemSelector+"').is(':visible')";return[code,Blockly.JavaScript.ORDER_NONE]},handleExceptionNative:function(e){console.warn("Exception: ",e);if(window.parent){window.parent.com.fc.JavaScriptGenerator.handleExceptionNative(e)}},reset:function(){var thisObject=this;Object.keys(thisObject).forEach(function(key){if(typeof thisObject[key].reset==="function")thisObject[key].reset()})}});function setTextValue(id,val){try{return $("#"+id+" input").val(val)}catch(e){throw new TextBoxException(e)}}function setTextFontSize(id,val){try{return $("#"+id+" input").css("font-size",val+"px")}catch(e){throw new TextBoxException(e)}}function setTextAlpha(id,val){try{return $("#"+id+" input").css("opacity",val/100)}catch(e){throw new TextBoxException(e)}}function setTextWidth(id,val){try{$("#"+id+" input").css("width",val+"px")}catch(e){throw new TextBoxException(e)}}function setTextHeight(id,val){try{$("#"+id+" input").css("height",val+"px")}catch(e){throw new TextBoxException(e)}}function setTextXPos(id,val){try{var yPos=Math.round($("#"+id).position().top);var changedXPos=$("#"+id).css("transform","translate("+val+"px,"+yPos+"px)");return changedXPos}catch(e){throw new TextBoxException(e)}}function setTextYPos(id,val){try{var xPos=Math.round($("#"+id).position().left);var changedYPos=$("#"+id).css("transform","translate("+xPos+"px,"+val+"px)");return changedYPos}catch(e){throw new TextBoxException(e)}}function setTextAlignment(id,val){try{if(val.toLowerCase()=="left"||val.toLowerCase()=="center"||val.toLowerCase()=="right"){return $("#"+id+" input").css("text-align",val.toLowerCase())}else{throw new TextBoxException("Alignment shoube be 'left' / 'center","right")}}catch(e){throw new TextBoxException(e)}}function setTextVerticalAlignment(id,val){try{if(val.toLowerCase()=="top"||val.toLowerCase()=="middle"||val.toLowerCase()=="bottom"){return $("#"+id+" input").css("vertical-align",val.toLowerCase())}else{throw new TextBoxException("Alignment shoube be 'top' / 'middle","bottom")}}catch(e){throw new TextBoxException(e)}}function setTextFontStyle(id,val){try{if(val.toLowerCase()=="normal"||val.toLowerCase()=="italic"||val.toLowerCase()=="oblique"||val.toLowerCase()=="bold"){return $("#"+id+" input").css("font-style",val.toLowerCase())}else{throw new TextBoxException("Font Style should be 'normal' / 'italic","oblique")}}catch(e){throw new TextBoxException(e)}}function setTextFontFamily(id,val){try{return $("#"+id+" input").css("font-family",val)}catch(e){throw new TextBoxException(e)}}function setTextbackgroundColor(id,val){try{return $("#"+id+" input").css("background-color",val)}catch(e){throw new TextBoxException(e)}}function setTextColor(id,val){try{return $("#"+id+" input").css("color",val)}catch(e){throw new TextBoxException(e)}}function toggleTextEnabled(id,val){try{$("#"+id+" input").attr("disabled",!val)}catch(e){throw new TextBoxException(e)}}function setPasswordChars(id,val){try{var inputType="text";if(val)inputType="password";$("#"+id+" input").attr("type",inputType)}catch(e){throw new TextBoxException(e)}}function setMaxChars(id,val){try{$("#"+id+" input").attr("maxlength",val)}catch(e){throw new TextBoxException(e)}}function setMaxLines(id,val){try{}catch(e){throw new TextBoxException(e)}}function setInputType(id,val){try{switch(val){case"numeric":case"number":var inputType="number";break;case"email":var inputType="email";break;default:var inputType="text";break}return $("#"+id+" input").attr("type",inputType)}catch(e){throw new TextBoxException(e)}}function setNavigationOrder(id,val){try{}catch(e){throw new TextBoxException(e)}}function getTextValue(id){try{return $("#"+id+" input").val()}catch(e){throw new TextBoxException(e)}}function getTextFontSize(id){try{return $("#"+id+" input").css("font-size")}catch(e){throw new TextBoxException(e)}}function getTextAlpha(id){try{return $("#"+id+" input").css("opacity")*100}catch(e){throw new TextBoxException(e)}}function getTextWidth(id){try{return $("#"+id+" input").width()}catch(e){throw new TextBoxException(e)}}function getTextHeight(id){try{return $("#"+id+" input").height()}catch(e){throw new TextBoxException(e)}}function getTextXPos(id){try{return Math.round($("#"+id).position().left)}catch(e){throw new TextBoxException(e)}}function getTextYPos(id){try{return Math.round($("#"+id).position().top)}catch(e){throw new TextBoxException(e)}}function getTextAlignment(id){try{return $("#"+id+" input").css("text-align")}catch(e){throw new TextBoxException(e)}}function getTextVerticalAlignment(id){try{return $("#"+id+" input").css("vertical-align")}catch(e){throw new TextBoxException(e)}}function getTextFontStyle(id){try{return $("#"+id+" input").css("font-style")}catch(e){throw new TextBoxException(e)}}function getTextFontFamily(id){try{return $("#"+id+" input").css("font-family")}catch(e){throw new TextBoxException(e)}}function getTextbackgroundColor(id){try{return $("#"+id+" input").css("background-color")}catch(e){throw new TextBoxException(e)}}function getTextColor(id){try{return $("#"+id+" input").css("color")}catch(e){throw new TextBoxException(e)}}function getTextEnabled(id){try{var disabled=$("#"+id+" input").attr("disabled");return!disabled}catch(e){throw new TextBoxException(e)}}function getPasswordChars(id){try{var inputType=$("#"+id+" input").attr("type");var isPassword=false;if(inputType=="password")isPassword=true;return isPassword}catch(e){throw new TextBoxException(e)}}function getMaxChars(id){try{return $("#"+id+" input").attr("maxlength")}catch(e){throw new TextBoxException(e)}}function getInputType(id){try{return $("#"+id+" input").attr("type")}catch(e){throw new TextBoxException(e)}}function getNavigationOrder(id){try{}catch(e){throw new TextBoxException(e)}}function TextBoxException(snappMessage,msg){this.name="TextBoxException";this.snappMessage=snappMessage;this.message=msg||snappMessage;this.stack=(new Error).stack}TextBoxException.prototype=Object.create(Error.prototype);TextBoxException.prototype.constructor=TextBoxException;var com=com||{};com.fc=com.fc||{};com.fc.JavaScriptDistLib=com.fc.JavaScriptDistLib||{};com.fc.JavaScriptDistLib.Gauge={setProperty:function(objName,property,value){try{var elemSelector='[obj-name="'+objName+'"]';var elem=$(elemSelector);var gauge;$(elemSelector).find(".c3").each(function(){gauge=$(this).data("c3-chart")});switch(property){case"width":case"height":case"x":case"y":com.fc.JavaScriptDistLib.setProperty(objName,property,value);break;case"Alpha":d3.selectAll(elemSelector).style("opacity",value/100);break;case"Background color":$(elemSelector+" svg").css("background-color",value);break;case"Current Value":gauge.load({columns:[["data",value]]});break;case"Maximum Value":gauge.internal.config.gauge_max=value;var gaugeData=gauge.data();var gaugeCurrVal=gaugeData[0].values[0].value;gauge.load({columns:[["data",gaugeCurrVal]]});break;case"Minimum Value":gauge.internal.config.gauge_min=value;var gaugeData=gauge.data();var gaugeCurrVal=gaugeData[0].values[0].value;gauge.load({columns:[["data",gaugeCurrVal]]});break;case"track color":d3.selectAll(elemSelector+" path.c3-chart-arcs-background").style("fill",value);break;case"pointer color":d3.selectAll(elemSelector).select("path.c3-arc-data").style("fill",value);break;case"track width":gauge.internal.config.gauge_width=value;var gaugeData=gauge.data();var gaugeCurrVal=gaugeData[0].values[0].value;gauge.load({columns:[["data",gaugeCurrVal]]});break}}catch(e){throw new com.fc.JavaScriptDistLib.Gauge.GaugeException(e)}},getProperty:function(objName,property){try{var elemSelector='[obj-name= "'+objName+'"]';var elem=$(elemSelector);var gauge;$(elemSelector).find(".c3").each(function(){gauge=$(this).data("c3-chart")});var value;switch(property){case"width":case"height":case"x":case"y":value=com.fc.JavaScriptDistLib.getProperty(objName,property);break;case"Alpha":value=$(elemSelector).css("opacity")*100;break;case"Background color":value=$(elemSelector).find("#fcGauge").css("background-color");break;case"Current Value":value=gauge.data()[0].values[0].value;break;case"Maximum Value":value=gauge.internal.config.gauge_max;break;case"Minimum Value":value=gauge.internal.config.gauge_min;break;case"track color":value=d3.selectAll(elemSelector+" path.c3-chart-arcs-background").style("fill");break;case"pointer color":value=d3.selectAll(elemSelector).select("path.c3-arc-data").style("fill");break;case"track width":value=gauge.internal.config.gauge_width;break}return value}catch(e){throw new com.fc.JavaScriptDistLib.Gauge.GaugeException(e)}},GaugeException:function(snappMessage,msg){this.name="GaugeException";this.snappMessage=snappMessage;this.message=msg||snappMessage;this.stack=(new Error).stack}};com.fc.JavaScriptDistLib.Gauge.GaugeException.prototype=Object.create(Error.prototype);com.fc.JavaScriptDistLib.Gauge.GaugeException.prototype.constructor=com.fc.JavaScriptDistLib.Gauge.GaugeException;class ConnioCore{constructor(){this.config={BaseURL:null,App:null,KEY:null,Secret:null,MQTTHost:null,MQTTPort:null,MQTTCientID:null,MQTTUsername:null,MQTTPassword:null,MQTTTopic:null}}configure(config){let properties;if(config){properties=JSON.parse(config)}else if(!this.config.BaseURL){let connioSO=Creator.currentProject.serviceModel.getServiceObject("Connio");properties=connioSO.attributes.attrs}if(properties){this.config.BaseURL=properties.api.url;this.config.App=properties.api.app;this.config.KEY=properties.api.key;this.config.Secret=properties.api.secret;this.config.MQTTHost=properties.mqtt.host;this.config.MQTTPort=Number(properties.mqtt.port);this.config.MQTTCientID=properties.mqtt.clientId;this.config.MQTTUsername=properties.mqtt.username;this.config.MQTTPassword=properties.mqtt.password;this.config.MQTTTopic="connio/apps/"+this.config.App+"/devices/#"}}connioConfigure(key,secret,callback){this.configure();this.config.KEY=key;this.config.Secret=secret}connioGetDeviceProfiles(successcallback){let parent=this;this.configure();let url=this.config.BaseURL+"/v2/deviceprofiles";$.ajax({url:url,type:"GET",headers:{Authorization:"Basic "+btoa(this.config.KEY+":"+this.config.Secret)},success:response=>{successcallback(response)},error:(xhr,code,msg)=>{console.log("Could not get the profiles. Could be network error")}})}connioGetDevices(filter,successcallback){let parent=this;this.configure();let url=this.config.BaseURL+"/v2/devices?profile="+filter;$.ajax({url:url,type:"GET",headers:{Authorization:"Basic "+btoa(this.config.KEY+":"+this.config.Secret)},success:response=>{successcallback(response)},error:(xhr,code,msg)=>{console.log("Could not get the devices.")}})}connioGetProperties(profile,successcallback){let parent=this;this.configure();let url=this.config.BaseURL+"/v2/deviceprofiles/"+profile+"/properties";$.ajax({url:url,type:"GET",headers:{Authorization:"Basic "+btoa(this.config.KEY+":"+this.config.Secret)},success:response=>{successcallback(response)},error:(xhr,code,msg)=>{console.log("Could not get the properties.")}})}}var com=com||{};com.fc=com.fc||{};com.fc.JavaScriptDistLib=com.fc.JavaScriptDistLib||{};com.fc.JavaScriptDistLib.ConnioCore=ConnioCore;
//# sourceMappingURL=DistLibLegacy.js.map